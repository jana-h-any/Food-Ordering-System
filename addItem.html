<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Add Menu Item</title>
<link rel="stylesheet" href="style.css">
<style>
body { font-family: Arial; background:#1c1c1c; color:white; padding:5px; }
form { display:flex; flex-direction:column; width:400px; gap:15px; }
input, select, textarea { padding:12px; border-radius:10px; border:none; background:#2c2c2c; color:white; }
button { padding:12px; border-radius:20px; background:#f0b133; color:#1c1c1c; font-weight:bold; cursor:pointer; }
button:hover { background:#d35400; color:white; }
</style>
</head>
<body >

    <header>
        <div class="logo">BTWEETY</div>
        <nav>
            <ul>
                <li><a href="restaurantDashboard.html">ORDERS</a></li>
                <li><a href="addItem.html">ADD ITEM</a></li>
                <li>
                    <a class="logout-icon" id="logoutBtn" href="#">
                        <img src="assets/icons/wexit.png" alt="Logout">
                    </a>
                </li>
            </ul>
        </nav>
    </header>
    <CENTER>
<h2>Add Menu Item</h2>
<form id="addMenuForm">
    <input type="text" id="itemName" placeholder="Item Name" required>
    <input type="number" step="1" id="itemPrice" placeholder="Price (+ve)" required min="0">
    <input type="text" id="itemImage" placeholder="Image Path" required>
    <input type="text" id="itemCategory" placeholder="Category "required>
    <textarea id="itemDescription" placeholder="Description (optional)"></textarea>
    <button type="submit">Add Item</button>
</form>
</CENTER>

<script>
const restaurantId = localStorage.getItem('restaurantId');
if(!restaurantId) window.location.href='restaurant-login.html';

const addMenuForm = document.getElementById('addMenuForm');
addMenuForm.addEventListener('submit', async e=>{
    e.preventDefault();
    const name = document.getElementById('itemName').value;
    const price = parseFloat(document.getElementById('itemPrice').value);
    const image = document.getElementById('itemImage').value;
    const category = document.getElementById('itemCategory').value;
    const description = document.getElementById('itemDescription').value;

    if(price<=0){ alert("Price must be positive"); return; }

    const res = await fetch('http://localhost:3000/restaurant/add-menu-item', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ restaurantId, name, price, image, category, description })
    });
    const data = await res.json();
    if(data.success){
        alert('Item added!');
        addMenuForm.reset();
    } else {
        alert('Error adding item');
    }
});

document.getElementById('logoutBtn').addEventListener('click', ()=>{
    localStorage.removeItem('restaurantId');
    window.location.href = 'restaurant-login.html';
});
</script>

</body>
</html>
