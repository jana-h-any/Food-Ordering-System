<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="burgerrStyle.css"/>
    <meta charset="UTF-8">
    <title>Restaurant Menu</title>
</head>
<body>

<script src="js file.js"></script>

<header>
    <div class="logo">BTWEETY</div>
    <nav>
        <ul>
            <li><a href="index.html">HOME</a></li>
            <li><a href="about.html">ABOUT</a></li>
            <li><a href="CHOOOSErES.html">MENU</a></li>
            <li><a href="history.html">History</a></li>
            <li><a href="cart.html">CART ðŸ›’</a></li>
            <li class="logout-icon">
                <a href="#" onclick="logout()">
                    <img src="assets/icons/wexit.png" alt="Logout">
                </a>
            </li>
        </ul>
    </nav>
</header>

<div class="menu-container" id="menuGrid"></div>

<script>
// Ø¬Ù„Ø¨ Ø§Ù„Ù€ restaurantId Ù…Ù† URL
const params = new URLSearchParams(window.location.search);
const restaurantId = params.get('id'); // Ù…Ø«Ø§Ù„: restaurant.html?id=2

async function loadMenu(restaurantId) {
    try {
        const res = await fetch(`http://localhost:3000/menuitems?restaurantId=${restaurantId}`);
        const items = await res.json();

        const container = document.getElementById("menuGrid"); 
        container.innerHTML = ""; // Ù†ØµÙØ± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‚Ø¯ÙŠÙ…

        // ØªØ­Ø¯ÙŠØ¯ ÙƒÙ„ Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©
        const categories = [...new Set(items.map(item => item.Category))];

        categories.forEach(category => {
            // Container Ù„ÙƒÙ„ ÙØ¦Ø©
            const categoryContainer = document.createElement("div");
            categoryContainer.classList.add("category-container");

            // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ¦Ø©
            const sectionTitle = document.createElement("div");
            sectionTitle.classList.add("section-title");
            sectionTitle.textContent = category;
            categoryContainer.appendChild(sectionTitle);

            // Grid Ù„Ù„ÙƒØ±ÙˆØª
            const grid = document.createElement("div");
            grid.classList.add("menu-grid");
            categoryContainer.appendChild(grid);

            // Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙØ¦Ø©
            items
                .filter(item => item.Category === category)
                .forEach(item => grid.appendChild(createCard(item)));

            // Ø¶ÙŠÙ Ø§Ù„ÙØ¦Ø© Ù„Ù„Ù€ main container
            container.appendChild(categoryContainer);
        });

    } catch(err){
        console.error("Error loading menu:", err);
    }
}

document.addEventListener('DOMContentLoaded', () => {
    if(restaurantId){
        loadMenu(restaurantId);
    } else {
        console.error("Restaurant ID not found in URL");
    }
});
</script>

</body>
</html>
